<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="OpenMLS"><title>openmls - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ac92e1bbe349e143.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="openmls" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0 (07dca489a 2024-02-04)" data-channel="1.76.0" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../openmls/index.html">openmls</a><span class="version">0.5.0</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../openmls/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">openmls</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/openmls/lib.rs.html#1-198">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="openmls"><a href="#openmls">OpenMLS</a></h2>
<p><a href="https://openmls.zulipchat.com"><img src="https://img.shields.io/badge/zulip-join_chat-blue.svg?style=for-the-badge&amp;logo=zulip" alt="OpenMLS Chat" /></a>
<a href="https://groups.google.com/u/0/g/openmls-dev"><img src="https://img.shields.io/badge/mailing-list-blue.svg?style=for-the-badge" alt="OpenMLS List" /></a></p>
<p><a href="https://github.com/openmls/openmls/actions/workflows/tests.yml?branch=main"><img src="https://img.shields.io/github/actions/workflow/status/openmls/openmls/tests.yml?branch=main&amp;style=for-the-badge&amp;logo=github" alt="Tests &amp; Checks" /></a></p>
<!-- Disabled until the drone CI is fixed in #1094 [![ARM64 Build Status][drone-image]](https://cloud.drone.io/openmls/openmls) -->
<p><a href="https://codecov.io/gh/openmls/openmls"><img src="https://img.shields.io/codecov/c/github/openmls/openmls/main?logo=codecov&amp;style=for-the-badge" alt="codecov" /></a></p>
<p><a href="https://docs.rs/crate/openmls/latest"><img src="https://img.shields.io/badge/docs-release-blue.svg?style=for-the-badge" alt="Docs" /></a>
<a href="https://openmls.tech/book"><img src="https://img.shields.io/badge/book-release-blue.svg?style=for-the-badge" alt="Book" /></a>
<img src="https://img.shields.io/badge/rustc-1.56+-blue.svg?style=for-the-badge&amp;logo=rust" alt="Rust Version" /></p>
<p><em>OpenMLS</em> is a Rust implementation of the Messaging Layer Security (MLS) protocol, as specified in <a href="https://datatracker.ietf.org/doc/html/rfc9420">RFC 9420</a>.</p>
<!-- The introduction of the book imports the lines up until here (line 14), excluding the headline and separately the lines below (starting from line 20). If the line numbers change here, please modify the imported lines in the book.-->
<p>It is a software library that can serve as a building block in applications that require end-to-end encryption of messages.
It has a safe and easy-to-use interface that hides the complexity of the underlying cryptographic operations.</p>
<h3 id="supported-ciphersuites"><a href="#supported-ciphersuites">Supported ciphersuites</a></h3>
<ul>
<li>MLS_128_HPKEX25519_AES128GCM_SHA256_Ed25519 (MTI)</li>
<li>MLS_128_DHKEMP256_AES128GCM_SHA256_P256</li>
<li>MLS_128_HPKEX25519_CHACHA20POLY1305_SHA256_Ed25519</li>
</ul>
<h3 id="supported-platforms"><a href="#supported-platforms">Supported platforms</a></h3>
<p>OpenMLS is built and tested on the Github CI for the following rust targets.</p>
<ul>
<li>x86_64-unknown-linux-gnu</li>
<li>i686-unknown-linux-gnu</li>
<li>x86_64-pc-windows-msvc</li>
<li>i686-pc-windows-msvc</li>
<li>x86_64-apple-darwin</li>
</ul>
<!-- Disabled until #1094 is fixed. Additionally, we're building and testing aarch64-unknown-linux-gnu on
[drone.io](https://cloud.drone.io/openmls/openmls). -->
<h4 id="unsupported-but-built-on-ci"><a href="#unsupported-but-built-on-ci">Unsupported, but built on CI</a></h4>
<p>The Github CI also builds (but doesn’t test) the following rust targets.</p>
<ul>
<li>aarch64-apple-darwin</li>
<li>aarch64-unknown-linux-gnu</li>
<li>aarch64-linux-android</li>
<li>aarch64-apple-ios</li>
<li>aarch64-apple-ios-sim</li>
<li>wasm32-unknown-unknown</li>
<li>armv7-linux-androideabi</li>
<li>x86_64-linux-android</li>
<li>i686-linux-android</li>
</ul>
<p>OpenMLS supports 32 bit platforms and above.</p>
<h3 id="cryptography-dependencies"><a href="#cryptography-dependencies">Cryptography Dependencies</a></h3>
<p>OpenMLS does not implement its own cryptographic primitives. Instead, it relies
on existing implementations of the cryptographic primitives used by MLS. There
are two different cryptography providers implemented right now. But consumers
can bring their own implementation. See <a href="https://github.com/openmls/openmls/tree/main/traits">traits</a> for more
details.</p>
<h3 id="working-on-openmls"><a href="#working-on-openmls">Working on OpenMLS</a></h3>
<p>For more details when working on OpenMLS itself please see the <a href="https://github.com/openmls/openmls/blob/main/Developer.md">Developer.md</a>.</p>
<h3 id="maintenance--support"><a href="#maintenance--support">Maintenance &amp; Support</a></h3>
<p>OpenMLS is maintained and developed by <a href="https://phnx.im">Phoenix R&amp;D</a> and <a href="https://cryspen.com">Cryspen</a>.</p>
<h3 id="acknowledgements"><a href="#acknowledgements">Acknowledgements</a></h3>
<p><a href="https://zulip.com/">Zulip</a> graciously provides the OpenMLS community with a “Zulip Cloud Standard” tier <a href="https://openmls.zulipchat.com">Zulip instance</a>.</p>
<h3 id="quick-start"><a href="#quick-start">Quick Start</a></h3>
<p>For a quick start to learn how OpenMLS works here’s the basic code to set
up to parties and have them create a group.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>openmls::prelude::{<span class="kw-2">*</span>, config::CryptoConfig};
<span class="kw">use </span>openmls_rust_crypto::{OpenMlsRustCrypto};
<span class="kw">use </span>openmls_basic_credential::SignatureKeyPair;

<span class="comment">// Define ciphersuite ...
</span><span class="kw">let </span>ciphersuite = Ciphersuite::MLS_128_DHKEMX25519_AES128GCM_SHA256_Ed25519;
<span class="comment">// ... and the crypto provider to use.
</span><span class="kw">let </span>provider = <span class="kw-2">&amp;</span>OpenMlsRustCrypto::default();

<span class="comment">// Now let's create two participants.

// A helper to create and store credentials.
</span><span class="kw">fn </span>generate_credential_with_key(
    identity: Vec&lt;u8&gt;,
    credential_type: CredentialType,
    signature_algorithm: SignatureScheme,
    provider: <span class="kw-2">&amp;</span><span class="kw">impl </span>OpenMlsProvider,
) -&gt; (CredentialWithKey, SignatureKeyPair) {
    <span class="kw">let </span>credential = Credential::new(identity, credential_type).unwrap();
    <span class="kw">let </span>signature_keys =
        SignatureKeyPair::new(signature_algorithm)
            .expect(<span class="string">"Error generating a signature key pair."</span>);

    <span class="comment">// Store the signature key into the key store so OpenMLS has access
    // to it.
    </span>signature_keys
        .store(provider.key_store())
        .expect(<span class="string">"Error storing signature keys in key store."</span>);
     
    (
        CredentialWithKey {
            credential,
            signature_key: signature_keys.public().into(),
        },
        signature_keys,
    )
}

<span class="comment">// A helper to create key package bundles.
</span><span class="kw">fn </span>generate_key_package(
    ciphersuite: Ciphersuite,
    provider: <span class="kw-2">&amp;</span><span class="kw">impl </span>OpenMlsProvider,
    signer: <span class="kw-2">&amp;</span>SignatureKeyPair,
    credential_with_key: CredentialWithKey,
) -&gt; KeyPackage {
    <span class="comment">// Create the key package
    </span>KeyPackage::builder()
        .build(
            CryptoConfig {
                ciphersuite,
                version: ProtocolVersion::default(),
            },
            provider,
            signer,
            credential_with_key,
        )
        .unwrap()
}

<span class="comment">// First they need credentials to identify them
</span><span class="kw">let </span>(sasha_credential_with_key, sasha_signer) = generate_credential_with_key(
    <span class="string">"Sasha"</span>.into(),
    CredentialType::Basic,
    ciphersuite.signature_algorithm(),
    provider,
);

<span class="kw">let </span>(maxim_credential_with_key, maxim_signer) = generate_credential_with_key(
    <span class="string">"Maxim"</span>.into(),
    CredentialType::Basic,
    ciphersuite.signature_algorithm(),
    provider,
);

<span class="comment">// Then they generate key packages to facilitate the asynchronous handshakes
// in MLS

// Generate KeyPackages
</span><span class="kw">let </span>maxim_key_package = generate_key_package(ciphersuite, provider, <span class="kw-2">&amp;</span>maxim_signer, maxim_credential_with_key);

<span class="comment">// Now Sasha starts a new group ...
</span><span class="kw">let </span><span class="kw-2">mut </span>sasha_group = MlsGroup::new(
    provider,
    <span class="kw-2">&amp;</span>sasha_signer,
    <span class="kw-2">&amp;</span>MlsGroupCreateConfig::default(),
    sasha_credential_with_key,
)
.expect(<span class="string">"An unexpected error occurred."</span>);

<span class="comment">// ... and invites Maxim.
// The key package has to be retrieved from Maxim in some way. Most likely
// via a server storing key packages for users.
</span><span class="kw">let </span>(mls_message_out, welcome_out, group_info) = sasha_group
    .add_members(provider, <span class="kw-2">&amp;</span>sasha_signer, <span class="kw-2">&amp;</span>[maxim_key_package])
    .expect(<span class="string">"Could not add members."</span>);

<span class="comment">// Sasha merges the pending commit that adds Maxim.
</span>sasha_group
   .merge_pending_commit(provider)
   .expect(<span class="string">"error merging pending commit"</span>);

<span class="comment">// Sascha serializes the [`MlsMessageOut`] containing the [`Welcome`].
</span><span class="kw">let </span>serialized_welcome = welcome_out
   .tls_serialize_detached()
   .expect(<span class="string">"Error serializing welcome"</span>);

<span class="comment">// Maxim can now de-serialize the message as an [`MlsMessageIn`] ...
</span><span class="kw">let </span>mls_message_in = MlsMessageIn::tls_deserialize(<span class="kw-2">&amp;mut </span>serialized_welcome.as_slice())
   .expect(<span class="string">"An unexpected error occurred."</span>);

<span class="comment">// ... and inspect the message.
</span><span class="kw">let </span>welcome = <span class="kw">match </span>mls_message_in.extract() {
   MlsMessageBodyIn::Welcome(welcome) =&gt; welcome,
   <span class="comment">// We know it's a welcome message, so we ignore all other cases.
   </span><span class="kw">_ </span>=&gt; <span class="macro">unreachable!</span>(<span class="string">"Unexpected message type."</span>),
};

<span class="comment">// Now Maxim can join the group.
 </span><span class="kw">let </span><span class="kw-2">mut </span>maxim_group = MlsGroup::new_from_welcome(
    provider,
    <span class="kw-2">&amp;</span>MlsGroupJoinConfig::default(),
    welcome,
    <span class="comment">// The public tree is need and transferred out of band.
    // It is also possible to use the [`RatchetTreeExtension`]
    </span><span class="prelude-val">Some</span>(sasha_group.export_ratchet_tree().into()),
 )
 .expect(<span class="string">"Error joining group from Welcome"</span>);</code></pre></div>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="ciphersuite/index.html" title="mod openmls::ciphersuite">ciphersuite</a></div><div class="desc docblock-short">Ciphersuites for MLS</div></li><li><div class="item-name"><a class="mod" href="credentials/index.html" title="mod openmls::credentials">credentials</a></div><div class="desc docblock-short">Credentials</div></li><li><div class="item-name"><a class="mod" href="error/index.html" title="mod openmls::error">error</a></div><div class="desc docblock-short">OpenMLS Errors</div></li><li><div class="item-name"><a class="mod" href="extensions/index.html" title="mod openmls::extensions">extensions</a></div><div class="desc docblock-short">Extensions</div></li><li><div class="item-name"><a class="mod" href="framing/index.html" title="mod openmls::framing">framing</a></div><div class="desc docblock-short">Message framing</div></li><li><div class="item-name"><a class="mod" href="group/index.html" title="mod openmls::group">group</a></div><div class="desc docblock-short">Group API for MLS</div></li><li><div class="item-name"><a class="mod" href="key_packages/index.html" title="mod openmls::key_packages">key_packages</a></div><div class="desc docblock-short">Key Packages</div></li><li><div class="item-name"><a class="mod" href="messages/index.html" title="mod openmls::messages">messages</a></div><div class="desc docblock-short">Messages</div></li><li><div class="item-name"><a class="mod" href="prelude/index.html" title="mod openmls::prelude">prelude</a></div><div class="desc docblock-short">Single place, re-exporting the most used public functions.
Prelude for OpenMLS.
Include this to get access to all the public functions of OpenMLS.</div></li><li><div class="item-name"><a class="mod" href="schedule/index.html" title="mod openmls::schedule">schedule</a></div><div class="desc docblock-short">Key schedule</div></li><li><div class="item-name"><a class="mod" href="treesync/index.html" title="mod openmls::treesync">treesync</a></div><div class="desc docblock-short">This module implements the ratchet tree component of MLS.</div></li><li><div class="item-name"><a class="mod" href="versions/index.html" title="mod openmls::versions">versions</a></div><div class="desc docblock-short">MLS versions</div></li></ul></section></div></main></body></html>