<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="OpenMLS"><meta name="keywords" content="rust, rustlang, rust-lang, openmls"><title>openmls - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../openmls/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../openmls/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate openmls</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.4.1</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">openmls</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/openmls/lib.rs.html#1-186">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="openmls"><a href="#openmls">OpenMLS</a></h2>
<p><a href="https://openmls.zulipchat.com"><img src="https://img.shields.io/badge/zulip-join_chat-blue.svg?style=for-the-badge&amp;logo=zulip" alt="OpenMLS Chat" /></a>
<a href="https://groups.google.com/u/0/g/openmls-dev"><img src="https://img.shields.io/badge/mailing-list-blue.svg?style=for-the-badge" alt="OpenMLS List" /></a></p>
<p><a href="https://github.com/openmls/openmls/actions/workflows/tests.yml?branch=main"><img src="https://img.shields.io/github/actions/workflow/status/openmls/openmls/tests.yml?branch=main&amp;style=for-the-badge&amp;logo=github" alt="Tests &amp; Checks" /></a>
<a href="https://cloud.drone.io/openmls/openmls"><img src="https://img.shields.io/drone/build/openmls/openmls/main?label=ARM64%20Build%20Status&amp;logo=drone&amp;style=for-the-badge" alt="ARM64 Build Status" /></a>
<a href="https://codecov.io/gh/openmls/openmls"><img src="https://img.shields.io/codecov/c/github/openmls/openmls/main?logo=codecov&amp;style=for-the-badge" alt="codecov" /></a></p>
<p><a href="https://docs.rs/crate/openmls/latest"><img src="https://img.shields.io/badge/docs-release-blue.svg?style=for-the-badge" alt="Docs" /></a>
<a href="https://openmls.tech/book"><img src="https://img.shields.io/badge/book-release-blue.svg?style=for-the-badge" alt="Book" /></a>
<img src="https://img.shields.io/badge/rustc-1.56+-blue.svg?style=for-the-badge&amp;logo=rust" alt="Rust Version" /></p>
<p><em>OpenMLS</em> is a Rust implementation of <a href="https://github.com/mlswg/mls-protocol/blob/master/draft-ietf-mls-protocol.md">Messaging Layer Security</a> based on draft 12+.</p>
<!-- The introduction of the book imports the lines up until here (line 14), excluding the headline and separately the lines below (starting from line 20). If the line numbers change here, please modify the imported lines in the book.-->
<p>It is a software library that can serve as a building block in applications that require end-to-end encryption of messages.
It has a safe and easy-to-use interface that hides the complexity of the underlying cryptographic operations.</p>
<h3 id="supported-ciphersuites"><a href="#supported-ciphersuites">Supported ciphersuites</a></h3>
<ul>
<li>MLS_128_HPKEX25519_AES128GCM_SHA256_Ed25519 (MTI)</li>
<li>MLS_128_DHKEMP256_AES128GCM_SHA256_P256</li>
<li>MLS_128_HPKEX25519_CHACHA20POLY1305_SHA256_Ed25519</li>
</ul>
<h3 id="supported-platforms"><a href="#supported-platforms">Supported platforms</a></h3>
<p>OpenMLS is built and tested on the Github CI for the following rust targets.</p>
<ul>
<li>x86_64-unknown-linux-gnu</li>
<li>i686-unknown-linux-gnu</li>
<li>x86_64-pc-windows-msvc</li>
<li>i686-pc-windows-msvc</li>
<li>x86_64-apple-darwin</li>
</ul>
<p>Additionally, we’re building and testing aarch64-unknown-linux-gnu on
<a href="https://cloud.drone.io/openmls/openmls">drone.io</a>.</p>
<p>The Github CI also builds (but doesn’t test) the following rust targets.</p>
<ul>
<li>aarch64-apple-darwin</li>
<li>aarch64-unknown-linux-gnu</li>
<li>aarch64-linux-android</li>
<li>aarch64-apple-ios</li>
<li>aarch64-apple-ios-sim</li>
<li>wasm32-unknown-unknown</li>
<li>armv7-linux-androideabi</li>
<li>x86_64-linux-android</li>
<li>i686-linux-android</li>
</ul>
<p>OpenMLS supports 32 bit platforms and above.</p>
<h3 id="cryptography-dependencies"><a href="#cryptography-dependencies">Cryptography Dependencies</a></h3>
<p>OpenMLS does not implement its own cryptographic primitives. Instead, it relies
on existing implementations of the cryptographic primitives used by MLS. There
are two different cryptography backends implemented right now. But consumers
can bring their own implementation. See <a href="https://github.com/openmls/openmls/tree/main/traits">traits</a> for more
details.</p>
<h3 id="working-on-openmls"><a href="#working-on-openmls">Working on OpenMLS</a></h3>
<p>For more details when working on OpenMLS itself please see the <a href="https://github.com/openmls/openmls/blob/main/Developer.md">Developer.md</a>.</p>
<h3 id="maintenance--support"><a href="#maintenance--support">Maintenance &amp; Support</a></h3>
<p>OpenMLS is maintained and developed by <a href="https://phnx.im">Phoenix R&amp;D</a> and <a href="https://cryspen.com">Cryspen</a>.</p>
<h3 id="quick-start"><a href="#quick-start">Quick Start</a></h3>
<p>For a quick start to learn how OpenMLS works here’s the basic code to set
up to parties and have them create a group.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>openmls::prelude::{<span class="kw-2">*</span>, config::CryptoConfig};
<span class="kw">use </span>openmls_rust_crypto::{OpenMlsRustCrypto};
<span class="kw">use </span>openmls_basic_credential::SignatureKeyPair;

<span class="comment">// Define ciphersuite ...
</span><span class="kw">let </span>ciphersuite = Ciphersuite::MLS_128_DHKEMX25519_AES128GCM_SHA256_Ed25519;
<span class="comment">// ... and the crypto backend to use.
</span><span class="kw">let </span>backend = <span class="kw-2">&amp;</span>OpenMlsRustCrypto::default();

<span class="comment">// Now let&#39;s create two participants.

// A helper to create and store credentials.
</span><span class="kw">fn </span>generate_credential_bundle(
    identity: Vec&lt;u8&gt;,
    credential_type: CredentialType,
    signature_algorithm: SignatureScheme,
    backend: <span class="kw-2">&amp;</span><span class="kw">impl </span>OpenMlsCryptoProvider,
) -&gt; (CredentialWithKey, SignatureKeyPair) {
    <span class="kw">let </span>credential = Credential::new(identity, credential_type).unwrap();
    <span class="kw">let </span>signature_keys =
        SignatureKeyPair::new(signature_algorithm)
            .expect(<span class="string">&quot;Error generating a signature key pair.&quot;</span>);

    <span class="comment">// Store the credential bundle into the key store so OpenMLS has access
    // to it.
    </span>signature_keys
        .store(backend.key_store())
        .expect(<span class="string">&quot;Error storing signature keys in key store.&quot;</span>);
     
    (
        CredentialWithKey {
            credential,
            signature_key: signature_keys.public().into(),
        },
        signature_keys,
    )
}

<span class="comment">// A helper to create key package bundles.
</span><span class="kw">fn </span>generate_key_package(
    ciphersuite: Ciphersuite,
    backend: <span class="kw-2">&amp;</span><span class="kw">impl </span>OpenMlsCryptoProvider,
    signer: <span class="kw-2">&amp;</span>SignatureKeyPair,
    credential_with_key: CredentialWithKey,
) -&gt; KeyPackage {
    <span class="comment">// Create the key package
    </span>KeyPackage::builder()
        .build(
            CryptoConfig {
                ciphersuite,
                version: ProtocolVersion::default(),
            },
            backend,
            signer,
            credential_with_key,
        )
        .unwrap()
}

<span class="comment">// First they need credentials to identify them
</span><span class="kw">let </span>(sasha_credential_with_key, sasha_signer) = generate_credential_bundle(
    <span class="string">&quot;Sasha&quot;</span>.into(),
    CredentialType::Basic,
    ciphersuite.signature_algorithm(),
    backend,
);

<span class="kw">let </span>(maxim_credential_with_key, maxim_signer) = generate_credential_bundle(
    <span class="string">&quot;Maxim&quot;</span>.into(),
    CredentialType::Basic,
    ciphersuite.signature_algorithm(),
    backend,
);

<span class="comment">// Then they generate key packages to facilitate the asynchronous handshakes
// in MLS

// Generate KeyPackages
</span><span class="kw">let </span>maxim_key_package = generate_key_package(ciphersuite, backend, <span class="kw-2">&amp;</span>maxim_signer, maxim_credential_with_key);

<span class="comment">// Now Sasha starts a new group ...
</span><span class="kw">let </span><span class="kw-2">mut </span>sasha_group = MlsGroup::new(
    backend,
    <span class="kw-2">&amp;</span>sasha_signer,
    <span class="kw-2">&amp;</span>MlsGroupConfig::default(),
    sasha_credential_with_key,
)
.expect(<span class="string">&quot;An unexpected error occurred.&quot;</span>);

<span class="comment">// ... and invites Maxim.
// The key package has to be retrieved from Maxim in some way. Most likely
// via a server storing key packages for users.
</span><span class="kw">let </span>(mls_message_out, welcome_out, group_info) = sasha_group
    .add_members(backend, <span class="kw-2">&amp;</span>sasha_signer, <span class="kw-2">&amp;</span>[maxim_key_package])
    .expect(<span class="string">&quot;Could not add members.&quot;</span>);

<span class="comment">// Sasha merges the pending commit that adds Maxim.
</span>sasha_group
   .merge_pending_commit(backend)
   .expect(<span class="string">&quot;error merging pending commit&quot;</span>);

<span class="comment">// Sascha serializes the [`MlsMessageOut`] containing the [`Welcome`].
</span><span class="kw">let </span>serialized_welcome = welcome_out
   .tls_serialize_detached()
   .expect(<span class="string">&quot;Error serializing welcome&quot;</span>);

<span class="comment">// Maxim can now de-serialize the message as an [`MlsMessageIn`] ...
</span><span class="kw">let </span>mls_message_in = MlsMessageIn::tls_deserialize(<span class="kw-2">&amp;mut </span>serialized_welcome.as_slice())
   .expect(<span class="string">&quot;An unexpected error occurred.&quot;</span>);

<span class="comment">// ... and inspect the message.
</span><span class="kw">let </span>welcome = <span class="kw">match </span>mls_message_in.extract() {
   MlsMessageInBody::Welcome(welcome) =&gt; welcome,
   <span class="comment">// We know it&#39;s a welcome message, so we ignore all other cases.
   </span><span class="kw">_ </span>=&gt; <span class="macro">unreachable!</span>(<span class="string">&quot;Unexpected message type.&quot;</span>),
};

<span class="comment">// Now Maxim can join the group.
 </span><span class="kw">let </span><span class="kw-2">mut </span>maxim_group = MlsGroup::new_from_welcome(
    backend,
    <span class="kw-2">&amp;</span>MlsGroupConfig::default(),
    welcome,
    <span class="comment">// The public tree is need and transferred out of band.
    // It is also possible to use the [`RatchetTreeExtension`]
    </span><span class="prelude-val">Some</span>(sasha_group.export_ratchet_tree()),
 )
 .expect(<span class="string">&quot;Error joining group from Welcome&quot;</span>);</code></pre></div>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="ciphersuite/index.html" title="openmls::ciphersuite mod">ciphersuite</a></div><div class="item-right docblock-short">Ciphersuites for MLS</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="credentials/index.html" title="openmls::credentials mod">credentials</a></div><div class="item-right docblock-short">Credentials</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="error/index.html" title="openmls::error mod">error</a></div><div class="item-right docblock-short">OpenMLS Errors</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="extensions/index.html" title="openmls::extensions mod">extensions</a></div><div class="item-right docblock-short">Extensions</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="framing/index.html" title="openmls::framing mod">framing</a></div><div class="item-right docblock-short">Message framing</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="group/index.html" title="openmls::group mod">group</a></div><div class="item-right docblock-short">Group API for MLS</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="key_packages/index.html" title="openmls::key_packages mod">key_packages</a></div><div class="item-right docblock-short">Key Packages</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="messages/index.html" title="openmls::messages mod">messages</a></div><div class="item-right docblock-short">Messages</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="prelude/index.html" title="openmls::prelude mod">prelude</a></div><div class="item-right docblock-short">Single place, re-exporting the most used public functions.
Prelude for OpenMLS.
Include this to get access to all the public functions of OpenMLS.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="schedule/index.html" title="openmls::schedule mod">schedule</a></div><div class="item-right docblock-short">Key schedule</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="treesync/index.html" title="openmls::treesync mod">treesync</a></div><div class="item-right docblock-short">This module implements the ratchet tree component of MLS.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="versions/index.html" title="openmls::versions mod">versions</a></div><div class="item-right docblock-short">MLS versions</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="openmls" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0 (fc594f156 2023-01-24)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>